import{r as n,a as S,c as d,b as a,F as T,d as A,e as m,w as I,f as g,v as _,u as B,o as l}from"./index-ConCm_F-.js";import{i as k}from"./axios-R6vW24p9.js";import{S as b}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DW_MHI2K.js";const F={class:"login-container"},L={class:"particles-container"},q={class:"login-card"},C={class:"input-group"},P={class:"input-with-icon"},V={class:"input-group"},j={class:"input-with-icon"},M=["disabled"],N={key:0},R={key:1,class:"loading-spinner"},D={__name:"Login",setup(K){const c=n(""),u=n(""),i=n(!1),w=n(null),h=B(),y=S(),x=async()=>{var p,e,s,v,f;w.value=null,i.value=!0;try{const t={username:c.value,password:u.value,client_id:"9e2e15d7-b085-4658-a320-d9f56e4954b3",client_secret:"Pn43v47JAVNKfAgzCApEwQ7KjWHxue4i8piAihZK",grant_type:"password"},o={headers:{"Content-Type":"application/json",Accept:"application/json"}},r=await k.post("/oauth/token",t,o);(p=r.data)!=null&&p.access_token&&(localStorage.setItem("access_token",r.data.access_token),localStorage.setItem("refresh_token",r.data.refresh_token),y.set_Token_RefreshToken(r.data.access_token,r.data.refresh_token),k.defaults.headers.common.Authorization=`Bearer ${r.data.access_token}`,await b.fire({title:"¡Éxito!",text:"Inicio de sesión exitoso",icon:"success",confirmButtonText:"Aceptar",allowOutsideClick:!1}),h.push("/Home"))}catch(t){console.error("Error durante el login:",t);let o="Error al iniciar sesión. Por favor, intente de nuevo.";(s=(e=t.response)==null?void 0:e.data)!=null&&s.message?o=t.response.data.message:((v=t.response)==null?void 0:v.status)===401?o="Credenciales inválidas. Por favor, verifique su usuario y contraseña.":((f=t.response)==null?void 0:f.status)===404&&(o="Servicio no disponible. Por favor, intente más tarde."),await b.fire({title:"Error",text:o,icon:"error",confirmButtonText:"Intentar de nuevo"})}finally{i.value=!1}};return(p,e)=>(l(),d("div",F,[a("div",L,[(l(),d(T,null,A(50,s=>a("div",{class:"particle",key:s})),64))]),e[9]||(e[9]=a("div",{class:"gradient-overlay"},null,-1)),a("div",q,[e[7]||(e[7]=a("div",{class:"logo-container"},[a("div",{class:"logo-wrapper"},[a("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3qyTW8s6UfaD4vVMLkLR7kgq7r3v_FOkjPg&s",alt:"Logo Factus",class:"logo"})]),a("h2",null,"Bienvenido a Factus"),a("p",{class:"subtitle"},"Sistema de Facturación Electrónica")],-1)),a("form",{onSubmit:I(x,["prevent"])},[a("div",C,[e[3]||(e[3]=a("label",{for:"email"},"Correo Electrónico",-1)),a("div",P,[e[2]||(e[2]=a("i",{class:"material-icons"},"email",-1)),g(a("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),type:"text",placeholder:"Ingrese su correo",required:""},null,512),[[_,c.value]])])]),a("div",V,[e[5]||(e[5]=a("label",{for:"password"},"Contraseña",-1)),a("div",j,[e[4]||(e[4]=a("i",{class:"material-icons"},"lock",-1)),g(a("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),type:"password",placeholder:"Ingrese su contraseña",required:""},null,512),[[_,u.value]])])]),e[6]||(e[6]=m('<div class="options-row" data-v-dad8fea5><div class="checkbox-group" data-v-dad8fea5><input type="checkbox" id="remember" data-v-dad8fea5><label for="remember" data-v-dad8fea5>Recordarme</label></div><a href="#" class="forgot-password" data-v-dad8fea5>¿Olvidaste tu contraseña?</a></div>',1)),a("button",{type:"submit",class:"login-button",disabled:i.value},[i.value?(l(),d("span",R)):(l(),d("span",N,"Iniciar Sesión"))],8,M)],32),e[8]||(e[8]=m('<p class="terms" data-v-dad8fea5> Al iniciar sesión aceptas nuestros <a href="#" data-v-dad8fea5>Términos de servicio</a> y nuestra <a href="#" data-v-dad8fea5>Política de privacidad</a>. </p><div class="footer-info" data-v-dad8fea5><p data-v-dad8fea5>© 2024 Factus - Todos los derechos reservados</p><p data-v-dad8fea5>Soporte: <a href="mailto:soporte@factus.com" data-v-dad8fea5>soporte@factus.com</a></p></div>',2))])]))}},G=E(D,[["__scopeId","data-v-dad8fea5"]]);export{G as default};
