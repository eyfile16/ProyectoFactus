import{a as n}from"./index-DW_MHI2K.js";const t=n.create({baseURL:"https://api-sandbox.factus.com.co",headers:{"Content-type":"application/json"},timeout:15e3});t.interceptors.request.use(e=>{try{const o=localStorage.getItem("administrador");if(!o)return console.warn("No se encontró información de administrador en localStorage"),e;const s=JSON.parse(o);return s.token?(e.url.includes("oauth/token")||(e.headers.Authorization=`Bearer ${s.token}`,console.log(`Configurando token para ${e.url}`)),e):(console.warn("Token no encontrado en los datos del administrador"),e)}catch(o){return console.error("Error al procesar el interceptor de solicitud",o),e}},e=>(console.error("Error en la solicitud",e),Promise.reject(e)));t.interceptors.response.use(e=>e,e=>(e.response?(console.error(`Error ${e.response.status}: ${e.response.statusText}`),e.response.status===401?console.error("Error de autenticación: Token inválido o expirado"):e.response.status===403?console.error("Error de autorización: No tiene permisos para esta acción"):e.response.status===500&&console.error("Error del servidor:",e.response.data)):e.request?console.error("No se recibió respuesta del servidor:",e.request):console.error("Error al configurar la solicitud:",e.message),Promise.reject(e)));async function i(e,o,s={}){try{if(console.log("Enviando datos:",o),!o)throw new Error("No se proporcionaron datos para enviar");const r=await t.post(e,o,s);return console.log("Respuesta de la API:",r.data),r.data}catch(r){throw console.error("Error en la petición POST",r),r.response?(console.error("Datos del error:",r.response.data),console.error("Estado HTTP:",r.response.status),console.error("Cabeceras:",r.response.headers),r.response.status===500&&(console.error("Error interno del servidor. Detalles de la solicitud:"),console.error("URL:",e),console.error("Método:","POST"),console.error("Datos enviados:",JSON.stringify(o,null,2)),console.error("Configuración:",JSON.stringify(s,null,2)))):r.request?console.error("No se recibió respuesta del servidor:",r.request):console.error("Error de configuración:",r.message),r}}export{i as p};
