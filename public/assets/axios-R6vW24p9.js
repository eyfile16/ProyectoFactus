import{a as c}from"./index-DW_MHI2K.js";const a=c.create({baseURL:"https://api-sandbox.factus.com.co",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});a.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));a.interceptors.response.use(e=>e,async e=>{var s,n;const t=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const o=localStorage.getItem("refresh_token");if(!o)throw new Error("No refresh token available");const r=await c.post("https://api-sandbox.factus.com.co/auth",{grant_type:"refresh_token",refresh_token:o,client_id:"9e2e15d7-b085-4658-a320-d9f56e4954b3",client_secret:"Pn43v47JAVNKfAgzCApEwQ7KjWHxue4i8piAihZK"});if((n=r.data)!=null&&n.access_token)return localStorage.setItem("access_token",r.data.access_token),localStorage.setItem("refresh_token",r.data.refresh_token),a.defaults.headers.common.Authorization=`Bearer ${r.data.access_token}`,t.headers.Authorization=`Bearer ${r.data.access_token}`,a(t)}catch(o){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/",Promise.reject(o)}}return Promise.reject(e)});export{a as i};
